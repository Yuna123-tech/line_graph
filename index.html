import React, { useState, useEffect, useRef } from 'react';

// ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸ (Inline SVGs for stability)
const IconPlus = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
);
const IconTrash = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
);
const IconDownload = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
);
const IconRefresh = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
);
const IconBarChart = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>
);
const IconWaves = () => (
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"></path><path d="M2 12c.6.5 1.2 1 2.5 1C7 13 7 11 9.5 11c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"></path><path d="M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"></path></svg>
);

const App = () => {
  // ìƒíƒœ ê´€ë¦¬: ê·¸ë˜í”„ ì œëª©, ì¶• ì´ë¦„, ë°ì´í„° í¬ì¸íŠ¸, ìƒ‰ìƒ í…Œë§ˆ
  const [graphTitle, setGraphTitle] = useState('ìš°ë¦¬ ë°˜ í‚¤ ë³€í™”');
  const [xAxisLabel, setXAxisLabel] = useState('ì´ë¦„');
  const [yAxisLabel, setYAxisLabel] = useState('í‚¤ (cm)');
  const [lineColor, setLineColor] = useState('#3B82F6'); // ê¸°ë³¸ íŒŒë€ìƒ‰
  
  // ìƒˆë¡œ ì¶”ê°€ëœ ìƒíƒœ: ëˆˆê¸ˆ ê°„ê²©, ë¬¼ê²°ì„  ì—¬ë¶€
  const [stepSize, setStepSize] = useState(''); // ë¹ˆ ê°’ì´ë©´ ìë™
  const [useWaveLine, setUseWaveLine] = useState(false);

  const [dataPoints, setDataPoints] = useState([
    { id: 1, label: '3ì›”', value: 130 },
    { id: 2, label: '4ì›”', value: 131 },
    { id: 3, label: '5ì›”', value: 132.5 },
    { id: 4, label: '6ì›”', value: 133 },
    { id: 5, label: '7ì›”', value: 134.2 },
  ]);
  const [isChartReady, setIsChartReady] = useState(false);

  const chartRef = useRef(null);
  const chartInstance = useRef(null);

  // Chart.js ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ
  useEffect(() => {
    if (window.Chart) {
      setIsChartReady(true);
      return;
    }

    const script = document.createElement('script');
    script.src = "https://cdn.jsdelivr.net/npm/chart.js";
    script.async = true;
    script.onload = () => setIsChartReady(true);
    document.body.appendChild(script);

    return () => {
      // Cleanup if needed
    };
  }, []);

  // ë°ì´í„° ì¶”ê°€ í•¨ìˆ˜
  const addDataPoint = () => {
    const newId = dataPoints.length > 0 ? Math.max(...dataPoints.map(d => d.id)) + 1 : 1;
    setDataPoints([...dataPoints, { id: newId, label: '', value: 0 }]);
  };

  // ë°ì´í„° ì‚­ì œ í•¨ìˆ˜
  const removeDataPoint = (id) => {
    if (dataPoints.length <= 2) {
      alert("ë°ì´í„°ëŠ” ìµœì†Œ 2ê°œ ì´ìƒ ìˆì–´ì•¼ í•´ìš”!");
      return;
    }
    setDataPoints(dataPoints.filter(point => point.id !== id));
  };

  // ë°ì´í„° ìˆ˜ì • í•¨ìˆ˜
  const updateDataPoint = (id, field, value) => {
    setDataPoints(dataPoints.map(point => 
      point.id === id ? { ...point, [field]: value } : point
    ));
  };

  // ì´ˆê¸°í™” í•¨ìˆ˜
  const resetData = () => {
    if(confirm("ì •ë§ ëª¨ë“  ë°ì´í„°ë¥¼ ì§€ìš°ê³  ë‹¤ì‹œ ì‹œì‘í• ê¹Œìš”?")) {
      setDataPoints([
        { id: 1, label: '1ë²ˆ', value: 0 },
        { id: 2, label: '2ë²ˆ', value: 0 },
      ]);
      setGraphTitle('ì œëª© ì—†ëŠ” ê·¸ë˜í”„');
      setStepSize('');
      setUseWaveLine(false);
    }
  };

  // ì´ë¯¸ì§€ ì €ì¥ í•¨ìˆ˜
  const downloadGraph = () => {
    const canvas = chartRef.current;
    if (!canvas) return;
    
    const link = document.createElement('a');
    link.download = `${graphTitle}.png`;
    link.href = canvas.toDataURL('image/png');
    link.click();
  };

  // Chart.js ë Œë”ë§ ë° ì—…ë°ì´íŠ¸
  useEffect(() => {
    if (!isChartReady || !chartRef.current) return;

    if (chartInstance.current) {
      chartInstance.current.destroy();
    }

    const ctx = chartRef.current.getContext('2d');

    // Chart.js ì˜µì…˜ êµ¬ì„±
    const chartOptions = {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          display: true,
          position: 'top',
          labels: { font: { size: 14, family: "'Jua', sans-serif" } }
        },
        title: {
          display: true,
          text: graphTitle,
          font: { size: 20, family: "'Jua', sans-serif" },
          padding: 20
        },
        tooltip: {
          backgroundColor: 'rgba(255, 255, 255, 0.9)',
          titleColor: '#000',
          bodyColor: '#000',
          borderColor: '#ddd',
          borderWidth: 1,
          padding: 10,
          displayColors: false,
        }
      },
      scales: {
        x: {
          title: { display: true, text: xAxisLabel, font: { weight: 'bold' } },
          grid: { display: false }
        },
        y: {
          title: { display: true, text: yAxisLabel, font: { weight: 'bold' } },
          // ë¬¼ê²°ì„  ë¡œì§: useWaveLineì´ ì°¸ì´ë©´ 0ë¶€í„° ì‹œì‘í•˜ì§€ ì•ŠìŒ(false), ê±°ì§“ì´ë©´ 0ë¶€í„° ì‹œì‘(true)
          beginAtZero: !useWaveLine, 
          grid: { borderDash: [5, 5] },
          ticks: {
            // ëˆˆê¸ˆ ê°„ê²© ì„¤ì •: ê°’ì´ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ ìë™
            stepSize: stepSize && Number(stepSize) > 0 ? Number(stepSize) : undefined
          }
        }
      },
      animation: {
        duration: 800,
        easing: 'easeOutQuart'
      }
    };

    // ë¬¼ê²°ì„  ê·¸ë¦¬ê¸° í”ŒëŸ¬ê·¸ì¸ (ì»¤ìŠ¤í…€)
    const waveLinePlugin = {
      id: 'waveLine',
      afterDraw: (chart) => {
        if (!useWaveLine) return; // ë¬¼ê²°ì„  ëª¨ë“œê°€ ì•„ë‹ ë•ŒëŠ” ê·¸ë¦¬ì§€ ì•ŠìŒ

        const { ctx, chartArea, scales } = chart;
        const { y, x } = scales;

        // ì¢Œí‘œ ê³„ì‚°: Yì¶•ì˜ ë§¨ ì•„ë˜ (Xì¶•ê³¼ ë§Œë‚˜ëŠ” ì§€ì  ê·¼ì²˜)
        const xPos = x.left;
        const yPos = y.bottom;
        const waveHeight = 16; // ë¬¼ê²°ì„  ë†’ì´
        const waveWidth = 8;   // ë¬¼ê²°ì„  ë„ˆë¹„

        ctx.save();
        
        // 1. ê¸°ì¡´ì˜ ì§ì„  Yì¶•ì„ ì§€ìš°ê¸° (í°ìƒ‰ ë°•ìŠ¤ë¡œ ë®ìŒ)
        ctx.fillStyle = '#FFFFFF';
        ctx.fillRect(xPos - 5, yPos - waveHeight - 4, 10, waveHeight + 8);

        // 2. ë¬¼ê²°ì„ (ì§€ê·¸ì¬ê·¸) ê·¸ë¦¬ê¸°
        ctx.beginPath();
        ctx.lineWidth = 2; // ì¶• ë‘ê»˜ì™€ ë¹„ìŠ·í•˜ê²Œ
        ctx.strokeStyle = '#9CA3AF'; // íšŒìƒ‰ (Tailwind gray-400)
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';

        const startY = yPos;
        const endY = yPos - waveHeight;
        const midX = xPos;

        // ë²ˆê°œ ëª¨ì–‘/ì§€ê·¸ì¬ê·¸ ê²½ë¡œ
        ctx.moveTo(midX, startY); // ë§¨ ì•„ë˜
        ctx.lineTo(midX - waveWidth/2, startY - (waveHeight * 0.25));
        ctx.lineTo(midX + waveWidth/2, startY - (waveHeight * 0.5));
        ctx.lineTo(midX - waveWidth/2, startY - (waveHeight * 0.75));
        ctx.lineTo(midX, endY); // ìœ„ìª½ ì—°ê²°
        
        ctx.stroke();

        // 3. (ì„ íƒì‚¬í•­) '0' í…ìŠ¤íŠ¸ë¥¼ ë¬¼ê²°ì„  ì•„ë˜ì— í‘œì‹œí•˜ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ ì£¼ì„ í•´ì œ
        // í•˜ì§€ë§Œ ê³µê°„ì´ ì¢ì•„ ê²¹ì¹  ìˆ˜ ìˆì–´ ë¬¼ê²°ì„ ë§Œìœ¼ë¡œ 'ìƒëµ'ì„ í‘œí˜„í•˜ëŠ” ê²ƒì´ ê¹”ë”í•©ë‹ˆë‹¤.
        
        ctx.restore();
      }
    };

    chartInstance.current = new window.Chart(ctx, {
      type: 'line',
      data: {
        labels: dataPoints.map(d => d.label === '' ? '(ë¹„ì–´ìˆìŒ)' : d.label),
        datasets: [{
          label: yAxisLabel,
          data: dataPoints.map(d => d.value),
          borderColor: lineColor,
          backgroundColor: `${lineColor}33`, // íˆ¬ëª…ë„ ì¶”ê°€
          pointBackgroundColor: '#fff',
          pointBorderColor: lineColor,
          pointHoverBackgroundColor: lineColor,
          pointBorderWidth: 2,
          pointRadius: 6,
          pointHoverRadius: 8,
          fill: true,
          tension: 0.3 // ê³¡ì„  ë¶€ë“œëŸ½ê²Œ
        }]
      },
      options: chartOptions,
      plugins: [waveLinePlugin] // í”ŒëŸ¬ê·¸ì¸ ë“±ë¡
    });

    return () => {
      if (chartInstance.current) {
        chartInstance.current.destroy();
      }
    };
  }, [isChartReady, dataPoints, graphTitle, xAxisLabel, yAxisLabel, lineColor, stepSize, useWaveLine]);

  return (
    <div className="min-h-screen bg-sky-50 font-sans text-gray-800 p-4 md:p-8 font-['Pretendard']">
      {/* í°íŠ¸ ë¡œë“œ (Google Fonts - Jua for cute titles, Pretendard for body) */}
      <style>{`
        @import url('https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;700&display=swap');
        h1, h2, h3, .cute-font { font-family: 'Jua', sans-serif; }
        body { font-family: 'Noto Sans KR', sans-serif; }
      `}</style>

      <div className="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-6">
        
        {/* í—¤ë” */}
        <div className="lg:col-span-12 bg-white rounded-3xl shadow-lg p-6 flex flex-col md:flex-row justify-between items-center border-4 border-sky-200">
          <div className="flex items-center gap-4 mb-4 md:mb-0">
            <div className="bg-sky-100 p-3 rounded-full text-sky-600">
              <IconBarChart />
            </div>
            <div>
              <h1 className="text-3xl text-sky-600 mb-1">êµ¬ë¦„ë°˜ êº¾ì€ì„  ê·¸ë˜í”„ ë§Œë“¤ê¸°</h1>
              <p className="text-gray-500">í‘œì— ê°’ì„ ë„£ìœ¼ë©´ ê·¸ë˜í”„ê°€ ì‘¥ì‘¥ ìë¼ë‚˜ìš”!</p>
            </div>
          </div>
          <div className="flex gap-2">
             <button 
              onClick={resetData}
              className="flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-xl transition-colors font-bold"
            >
              <IconRefresh />
              ë‹¤ì‹œ í•˜ê¸°
            </button>
            <button 
              onClick={downloadGraph}
              className="flex items-center gap-2 px-6 py-2 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl shadow-md transition-all transform hover:-translate-y-1 font-bold"
            >
              <IconDownload />
              ê·¸ë¦¼ ì €ì¥í•˜ê¸°
            </button>
          </div>
        </div>

        {/* ì™¼ìª½: ì„¤ì • ë° ë°ì´í„° ì…ë ¥ */}
        <div className="lg:col-span-4 space-y-6">
          
          {/* 1. ê·¸ë˜í”„ ì„¤ì • ì¹´ë“œ */}
          <div className="bg-white rounded-3xl shadow-md p-6 border-2 border-indigo-100">
            <h2 className="text-xl text-indigo-800 mb-4 flex items-center gap-2">
              <span className="bg-indigo-100 text-indigo-600 w-8 h-8 rounded-full flex items-center justify-center text-sm">1</span>
              ì œëª©ê³¼ ìƒ‰ìƒ ì •í•˜ê¸°
            </h2>
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-bold text-gray-600 mb-1">ê·¸ë˜í”„ ì œëª©</label>
                <input 
                  type="text" 
                  value={graphTitle} 
                  onChange={(e) => setGraphTitle(e.target.value)}
                  className="w-full p-3 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-indigo-400 focus:outline-none transition-colors"
                  placeholder="ì˜ˆ: ì½©ë‚˜ë¬¼ í‚¤ ì¬ê¸°"
                />
              </div>
              <div className="grid grid-cols-2 gap-4">
                <div>
                   <label className="block text-sm font-bold text-gray-600 mb-1">ê°€ë¡œì¶• ì´ë¦„ (ë¬´ì—‡?)</label>
                   <input 
                    type="text" 
                    value={xAxisLabel}
                    onChange={(e) => setXAxisLabel(e.target.value)}
                    className="w-full p-2 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-indigo-400 focus:outline-none"
                  />
                </div>
                <div>
                   <label className="block text-sm font-bold text-gray-600 mb-1">ì„¸ë¡œì¶• ì´ë¦„ (ë‹¨ìœ„)</label>
                   <input 
                    type="text" 
                    value={yAxisLabel}
                    onChange={(e) => setYAxisLabel(e.target.value)}
                    className="w-full p-2 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-indigo-400 focus:outline-none"
                  />
                </div>
              </div>

              {/* ì¶”ê°€ëœ ëˆˆê¸ˆ ì„¤ì • ì„¹ì…˜ */}
              <div className="pt-2 border-t border-gray-100 mt-2">
                <label className="block text-sm font-bold text-gray-600 mb-2">ëˆˆê¸ˆ ì„¤ì • (ê³ ê¸‰)</label>
                <div className="grid grid-cols-2 gap-4">
                  <div>
                    <label className="text-xs text-gray-500 mb-1 block">ëˆˆê¸ˆ í•œ ì¹¸ í¬ê¸°</label>
                    <input 
                      type="number" 
                      value={stepSize}
                      onChange={(e) => setStepSize(e.target.value)}
                      placeholder="ìë™"
                      className="w-full p-2 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-indigo-400 focus:outline-none text-sm"
                    />
                  </div>
                  <div className="flex items-center">
                    <button
                      onClick={() => setUseWaveLine(!useWaveLine)}
                      className={`w-full flex items-center justify-center gap-2 p-2 rounded-xl border-2 transition-all ${
                        useWaveLine 
                          ? 'bg-indigo-50 border-indigo-400 text-indigo-700 font-bold' 
                          : 'bg-gray-50 border-gray-200 text-gray-500'
                      }`}
                    >
                      <IconWaves />
                      <span className="text-sm">ë¬¼ê²°ì„  {useWaveLine ? 'ON' : 'OFF'}</span>
                    </button>
                  </div>
                </div>
                <p className="text-xs text-gray-400 mt-2">
                  * ë¬¼ê²°ì„ ì„ ì¼œë©´ 0ë¶€í„° ì‹œì‘í•˜ì§€ ì•Šê³  ê°’ ê·¼ì²˜ì—ì„œ ì‹œì‘í•´ìš”.
                </p>
              </div>

              <div>
                <label className="block text-sm font-bold text-gray-600 mb-2">ì„  ìƒ‰ìƒ ê³ ë¥´ê¸°</label>
                <div className="flex gap-2">
                  {['#3B82F6', '#EF4444', '#10B981', '#F59E0B', '#8B5CF6', '#EC4899'].map(color => (
                    <button
                      key={color}
                      onClick={() => setLineColor(color)}
                      className={`w-8 h-8 rounded-full border-2 transition-transform hover:scale-110 ${lineColor === color ? 'border-gray-600 scale-110 ring-2 ring-offset-2 ring-gray-300' : 'border-transparent'}`}
                      style={{ backgroundColor: color }}
                    />
                  ))}
                </div>
              </div>
            </div>
          </div>

          {/* 2. ë°ì´í„° ì…ë ¥ ì¹´ë“œ */}
          <div className="bg-white rounded-3xl shadow-md p-6 border-2 border-sky-100">
             <div className="flex justify-between items-center mb-4">
              <h2 className="text-xl text-sky-800 flex items-center gap-2">
                <span className="bg-sky-100 text-sky-600 w-8 h-8 rounded-full flex items-center justify-center text-sm">2</span>
                í‘œ ì±„ìš°ê¸°
              </h2>
              <button 
                onClick={addDataPoint}
                className="flex items-center gap-1 text-sm bg-sky-100 text-sky-700 px-3 py-1.5 rounded-lg hover:bg-sky-200 font-bold transition-colors"
              >
                <IconPlus /> ì¶”ê°€í•˜ê¸°
              </button>
            </div>
            
            <div className="max-h-[300px] overflow-y-auto pr-2 custom-scrollbar">
              <div className="grid grid-cols-12 gap-2 mb-2 text-center text-xs font-bold text-gray-500 bg-gray-50 py-2 rounded-lg">
                <div className="col-span-5">{xAxisLabel || 'ê°€ë¡œ'}</div>
                <div className="col-span-5">{yAxisLabel || 'ì„¸ë¡œ'}</div>
                <div className="col-span-2">ì‚­ì œ</div>
              </div>

              {dataPoints.map((point) => (
                <div key={point.id} className="grid grid-cols-12 gap-2 mb-2 items-center animate-fadeIn">
                  <div className="col-span-5">
                    <input
                      type="text"
                      value={point.label}
                      onChange={(e) => updateDataPoint(point.id, 'label', e.target.value)}
                      placeholder="ì˜ˆ: 1ì¼"
                      className="w-full p-2 border-2 border-gray-200 rounded-lg text-center focus:border-sky-400 focus:outline-none focus:bg-sky-50"
                    />
                  </div>
                  <div className="col-span-5">
                    <input
                      type="number"
                      value={point.value}
                      onChange={(e) => updateDataPoint(point.id, 'value', Number(e.target.value))}
                      className="w-full p-2 border-2 border-gray-200 rounded-lg text-center focus:border-sky-400 focus:outline-none focus:bg-sky-50 font-bold text-sky-700"
                    />
                  </div>
                  <div className="col-span-2 flex justify-center">
                    <button
                      onClick={() => removeDataPoint(point.id)}
                      className="p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors"
                      title="ì‚­ì œ"
                    >
                      <IconTrash />
                    </button>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>

        {/* ì˜¤ë¥¸ìª½: ê·¸ë˜í”„ ì˜ì—­ */}
        <div className="lg:col-span-8">
          <div className="bg-white rounded-3xl shadow-xl p-4 md:p-8 h-full border-4 border-gray-100 flex flex-col justify-center relative min-h-[500px]">
            {/* ë°°ê²½ ì¥ì‹ (êµ¬ë¦„) */}
            <div className="absolute top-4 right-8 text-sky-100 opacity-50 pointer-events-none">
              <svg width="100" height="60" viewBox="0 0 24 24" fill="currentColor">
                <path d="M17.5,19c-3.037,0-5.5-2.463-5.5-5.5c0-0.448,0.066-0.878,0.176-1.288C10.983,12.066,9.5,12,9.5,12 c-2.485,0-4.5,2.015-4.5,4.5S7.015,21,9.5,21h8c2.485,0,4.5-2.015,4.5-4.5s-2.015-4.5-4.5-4.5c-0.445,0-0.873,0.076-1.276,0.207 C16.685,10.158,15.656,9,14.5,9c-1.854,0-3.41,1.258-3.856,2.969C10.363,11.977,10.088,12,9.805,12C8.262,12,7,13.262,7,14.805 S8.262,17.609,9.805,17.609h7.695c1.378,0,2.5-1.122,2.5-2.5S18.878,12.609,17.5,12.609c-0.209,0-0.41,0.034-0.6,0.091V12.5 c0-2.481-2.019-4.5-4.5-4.5c-1.704,0-3.188,0.95-3.99,2.378C8.169,10.141,7.842,10.046,7.5,10.046c-2.485,0-4.5,2.015-4.5,4.5 s2.015,4.5,4.5,4.5h10v-0.046Z" />
              </svg>
            </div>

            <div className="w-full h-[500px] relative z-10 flex items-center justify-center">
              {!isChartReady ? (
                <div className="text-gray-400 animate-pulse">ê·¸ë˜í”„ ë„êµ¬ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
              ) : (
                <canvas ref={chartRef} />
              )}
            </div>

            <div className="mt-8 text-center text-gray-400 text-sm font-['Jua'] bg-gray-50 rounded-xl py-3 border border-gray-100">
              ğŸ’¡ íŒ: {useWaveLine ? 'ë¬¼ê²°ì„ ì´ ì¼œì ¸ì„œ 0ë¶€í„° ì‹œì‘í•˜ì§€ ì•Šì•„ìš”!' : 'ê·¸ë˜í”„ ìœ„ì˜ ì ì„ ë§ˆìš°ìŠ¤ë¡œ ê°€ë¦¬í‚¤ë©´ ì •í™•í•œ ê°’ì„ ë³¼ ìˆ˜ ìˆì–´ìš”!'}
            </div>
          </div>
        </div>

      </div>
    </div>
  );
};

export default App;
